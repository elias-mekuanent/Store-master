{% extends 'base.html' %} {% load static %} {% block content %}
<!-- ======= Header ======= -->
<header id="header" class="header fixed-top d-flex align-items-center">
  <div class="d-flex align-items-center justify-content-right">
    <a href="{% url 'employe_dashboard' %}" class="logo d-flex align-items-center">
      <img src="{% static '/img/newfile.png' %}" alt="" />
      <span
        class="d-none d-lg-block"
        style="color: black; margin-top: 5px; padding-left: 5px"
        >Dan Store</span
      >
    </a>
   
  </div>
  <!-- End Logo -->
  <nav class="header-nav ms-auto">
    <ul class="d-flex align-items-center">
      <li class="nav-item d-block d-lg-none">
        <a class="nav-link nav-icon search-bar-toggle" href="#">
          <i class="bi bi-search"></i>
        </a>
      </li>
      <!-- End Search Icon-->
     

      <li class="nav-item dropdown">
        <a class="nav-link nav-icon" href="#" data-bs-toggle="dropdown">
          <i class="bi bi-chat-left-text"></i>
          <span class="badge bg-success badge-number">3</span> </a
        ><!-- End Messages Icon -->

        <ul
          class="dropdown-menu dropdown-menu-end dropdown-menu-arrow messages"
        >
          <li class="dropdown-header">
            You have 3 new messages
            <a href="#"
              ><span class="badge rounded-pill bg-primary p-2 ms-2"
                >View all</span
              ></a
            >
          </li>
          <li>
            <hr class="dropdown-divider" />
          </li>

          <li class="message-item">
            <a href="#">
              <img
                src="{% static '/img/messages-1.jpg' %}"
                alt=""
                class="rounded-circle"
              />
              <div>
                <h4>Maria Hudson</h4>
                <p>
                  Velit asperiores et ducimus soluta repudiandae labore officia
                  est ut...
                </p>
                <p>4 hrs. ago</p>
              </div>
            </a>
          </li>
          <li>
            <hr class="dropdown-divider" />
          </li>

          <li class="message-item">
            <a href="#">
              <img
                src="{% static '/img/messages-2.jpg' %}"
                alt=""
                class="rounded-circle"
              />
              <div>
                <h4>Anna Nelson</h4>
                <p>
                  Velit asperiores et ducimus soluta repudiandae labore officia
                  est ut...
                </p>
                <p>6 hrs. ago</p>
              </div>
            </a>
          </li>
          <li>
            <hr class="dropdown-divider" />
          </li>

          <li class="message-item">
            <a href="#">
              <img
                src="{% static '/img/messages-3.jpg' %}"
                alt=""
                class="rounded-circle"
              />
              <div>
                <h4>David Muldon</h4>
                <p>
                  Velit asperiores et ducimus soluta repudiandae labore officia
                  est ut...
                </p>
                <p>8 hrs. ago</p>
              </div>
            </a>
          </li>
          <li>
            <hr class="dropdown-divider" />
          </li>

          <li class="dropdown-footer">
            <a href="#">Show all messages</a>
          </li>
        </ul>
        <!-- End Messages Dropdown Items -->
      </li>
      <!-- End Messages Nav -->

      <li class="nav-item dropdown pe-3">
        <a
          class="nav-link nav-profile d-flex align-items-center pe-0"
          href="#"
          data-bs-toggle="dropdown"
        >
        {% if admin.profile_pic %}
        <img src="{{admin.profile_pic.url}}" alt="Profile" 
        alt="Profile"
        class="rounded-circle">
        
        {% endif %}
         
          <span class="d-none d-md-block ps-2"
            >{{user.first_name}} {{user.last_name}}</span
          > </a
        ><!-- End Profile Iamge Icon -->
        <!-- <h6>{{user.first_name}} {{user.last_name}}</h6> -->
        <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow profile">
          <li class="dropdown-header">
            <h6>{{user.first_name}} {{user.last_name}}</h6>
            <span>{{user.store_manager.Job}}</span>
          </li>
          <li>
            <hr class="dropdown-divider" />
          </li>

          <li>
            <a
              class="dropdown-item d-flex align-items-center"
              href="{% url 'emp_user-Profile' %}"
            >
              <i class="bi bi-person"></i>
              <span>My Profile</span>
            </a>
          </li>
          <li>
            <hr class="dropdown-divider" />
          </li>

          <li>
            <a
              class="dropdown-item d-flex align-items-center"
              href="{% url 'emp_chage_password' %}"
            >
              <i class="bi bi-gear"></i>
              <span>Account Settings</span>
            </a>
          </li>
          <li>
            <hr class="dropdown-divider" />
          </li>
          <li>
            <hr class="dropdown-divider" />
          </li>

          <li>
            <a
              class="dropdown-item d-flex align-items-center"
              href="{% url 'log-out' %}"
            >
              <i class="bi bi-box-arrow-right"></i>
              <span>Sign Out</span>
            </a>
          </li>
        </ul>
        <!-- End Profile Dropdown Items -->
      </li>
      <!-- End Profile Nav -->
    </ul>
  </nav>
  <!-- End Icons Navigation -->
</header>
<!-- End Header -->

<!-- ======= Sidebar ======= -->

    
{% for mssg in messages%}
{% if mssg.tags == 'success' %}
<div class="alert alert-success" role="alert">
  {{mssg}}
</div>
{%else %}
<div class="alert alert-danger" role="alert">
  {{mssg}}
</div>
{% endif %}
{% endfor %}
{% block profile1 %} 
<main style="margin-top: 100px; " class="container">
    <section class="section">
      
      {% block employer %} 
      <div class="row">
        <div class="col-xxl-3 col-xl-3 col-lg-3 col-md-3">
          <a href="{% url 'pending_item' %}">
          <div class="card info-card revenue-card newshadow">
            <div class="card-body">
              <h5 class="card-title">Pending Request</h5>

              <div class="d-flex align-items-center">
                <div
                  class="card-icon rounded-circle d-flex align-items-center justify-content-center"
                >
                <h1><span class="badge bg-warning">{{total_pending}}</span><h1></h1>
            </div>
            <div class="ps-3">
              <span class="text-muted small pt-2 ps-1">Items</span>
            </div>
              </div>
            </div>
          </div>
        </a>
        </div>
        <div class="col-xxl-3 col-xl-3 col-lg-3 col-md-3">
          <a href="{% url 'total_item_in_me' %}">
          <div class="card info-card revenue-card newshadow">
            <div class="card-body">
              <h5 class="card-title">Total Item in Me</h5>

              <div class="d-flex align-items-center">
                <div
                  class="card-icon rounded-circle d-flex align-items-center justify-content-center"
                >
                <h1><span class="badge bg-success">{{all_emp_request_in_me.count}}</span><h1></h1>
            </div>
            <div class="ps-3">
              <span class="text-muted small pt-2 ps-1">items</span>
            </div>
              </div>
            </div>
          </div>
        </a>
        </div>
        <div class="col-xxl-3 col-xl-3 col-lg-3 col-md-3">
          <a href="{% url 'Returned_item' %}">
          <div class="card info-card revenue-card newshadow">
            <div class="card-body">
              <h5 class="card-title">Item Returned</h5>

              <div class="d-flex align-items-center">
                <div
                  class="card-icon rounded-circle d-flex align-items-center justify-content-center"
                >
                <h1><span class="badge bg-info">{{all_emp_request_retun.count}}</span><h1></h1>
            </div>
            <div class="ps-3">
              <span class="text-muted small pt-2 ps-1">Items</span>
            </div>
              </div>
            </div>
          </div>
        </a>
        </div>
       
        <div class="col-xxl-3 col-xl-3 col-lg-3 col-md-3">
          <a href="{% url 'Rejected_Canceld' %}">
          <div class="card info-card revenue-card newshadow">
            <div class="card-body">
              <h5 class="card-title">Rejected and Cancled</h5>

              <div class="d-flex align-items-center">
                <div
                  class="card-icon rounded-circle d-flex align-items-center justify-content-center"
                >
                <h1><span class="badge bg-danger">{{all_emp_request_reject.count}}</span><h1></h1>
            </div>
            <div class="ps-3">
              <span class="text-muted small pt-2 ps-1">Items</span>
            </div>
              </div>
            </div>
          </div>
        </a>
        </div>
      </div>
        <div class="row">
            <div class="col-lg-12">
            
           

            <div class="row">
              {% block table %} 
              <div class="col-lg-12">
                <div class="card recent-sales overflow-auto">
                  <div class="card-body">
                    <h5 class="card-title">List OF Items</h5>
                    
                    <!-- Table with stripped rows -->
                    <table class="table datatable">
                      <thead>
                        <tr>
                          <!-- <th scope="col">#</th> -->
                          <th scope="col">Describtion</th>
                          <th scope="col">Unit</th>
                          <th scope="col">Qty</th>
                          <th scope="col">Department Head Approval</th>
                          <th scope="col">Store Manager Action</th>
                          <th scope="col">Received Status</th>
                          <th scope="col">Date</th>
                        </tr>
                      </thead>
                      <tbody>
                        {% for item in all_emp_request %}
                        
                        
                        <tr>
                          <!-- <th scope="row">1</th> -->
                          
                          {% if item.Recival_status_by_Employer == 'Not_Received' %}
                          <td><a href="{% url 'view_request' item.id %}">{{item.Description}}</a></td>
                          <td>{{item.unit}}</td>
                          <td>{{item.req_qty}}</td>
                          <td><span class="badge bg-info">Request_Cancelled</span></td>
                          <td><span class="badge bg-info">Request_Cancelled</span></td>
                          <td><span class="badge bg-info">Request_Cancelled</span></td>
                          {% else  %}
                          <td><a href="{% url 'view_request' item.id %}">{{item.Description}}</a></td>
                          <td>{{item.unit}}</td>
                          <td>{{item.req_qty}}</td>
                          {% if item.dept_head_Action == 'Pending' %}
                          <td><span class="badge bg-warning text-dark">{{item.dept_head_Action}}</span></td>
                          {% elif item.dept_head_Action == 'Approved' %}
                          <td><span class="badge bg-success">{{item.dept_head_Action}}</span></td>
                          {% elif item.dept_head_Action == 'Rejected' %}
                          <td><span class="badge bg-danger">{{item.dept_head_Action}}</span></td>
                          {% endif %} 
                          {% if item.Store_Keeper_Action == "Pending" %}
                          <td><span class="badge bg-warning text-dark">{{item.Store_Keeper_Action}}</span></td>
                          {% elif item.Store_Keeper_Action == 'Allowed' %}
                          <td><span class="badge bg-success">{{item.Store_Keeper_Action}}</span></td>
                          {% elif item.Store_Keeper_Action == 'wait' %}
                          <td><span class="badge bg-info">{{item.Store_Keeper_Action}}</span></td>
                          {% elif item.Store_Keeper_Action == 'Reject' %}
                          <td><span class="badge bg-danger">Rejected</span></td>
                          {% endif %} 

                          
                          {% if item.Store_Keeper_Action == "Pending" %}
                          <td>
                            <a class="btn btn-sm btn-success text-dark disabled">Yes</a>
                            <a href="{% url 'cancel_request' item.id %}" class="btn btn-sm btn-danger text-dark ">No</a>
                          </td>
                          {% elif item.Store_Keeper_Action == 'wait' %}
                          <td>
                            <a class="btn btn-sm btn-success text-dark disabled">Yes</a>
                            <a href="{% url 'cancel_request' item.id %}" class="btn btn-sm btn-danger text-dark ">No</a>
                          </td>
                          {% elif item.Store_Keeper_Action == 'Allowed' %} 
                             {% if item.Recival_status_by_Employer == 'Received' %}
                             <td><span class="badge bg-success">Completed_Request</span></td>
                          {% elif item.Recival_status_by_Employer == 'Not_Received' %}
                          <td><span class="badge bg-info">Request_Cancelled</span></td>
                          {% elif item.Recival_status_by_Employer == 'Returned' %}
                          <td><span class="badge bg-primary">Item is Returned</span></td>
                          {% else  %}
                          <td>
                            <a href="{% url 'approved_accept' item.id %}" class="btn btn-sm btn-success text-dark ">Yes</a>
                            <a href="{% url 'cancel_request' item.id %}" class="btn btn-sm btn-danger text-dark ">No</a>
                          </td>
                            {% endif %}
                         
                          {% elif item.Store_Keeper_Action == 'Reject' %}
                          <td>
                            <span class="badge bg-danger">Request_Rejected</span>
                          </td>
                          {% endif %}
                          {% endif %}


                          
                          
                          
                          <td>{{item.date}}</td>
                          
                          
                        </tr>
                       {% endfor %}
  
                          
                        
                      
                      </tbody>
                    </table>
                    <!-- End Table with stripped rows -->
      
                  </div>
                </div>
                </div>
                {% endblock table %}
                </div>

                <div class="row pb-3">
                  <div class="col-lg-12  text-end">
                    <div class="btn-group " role="group" aria-label="Basic example">
                      <a href="{% url 'emp_request' %}" class="btn btn-outline-secondary">New Request</a>
                    </div>
                  </div>
                </div>
                {% endblock %}
         </div>
         </div>
    </section>
  </main>

  {% endblock profile1 %}
  
{% endblock %}

{% block footer %}
  <footer id="" class="footer">
    <div class="copyright">
      &copy; Copyright <strong><span>DanEnergy</span></strong
      >. All Rights Reserved
    </div>
    <div class="credits">
      </div>
  </footer>
{% endblock footer %}
